<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Flappy Bird for Nishanvi ðŸ’–</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* {
    box-sizing: border-box;
}

body {
    margin: 0;
    overflow: hidden;
    background: linear-gradient(#4fa3d1, #bde7ff);
    font-family: Arial, sans-serif;
}

#game {
    position: relative;
    width: 100vw;
    height: 100vh;
}

#bird {
    position: absolute;
    width: 55px;
    height: 55px;
    left: 20%;
    top: 40%;
    background-image: url("https://i.ibb.co/q3hRnjrT/nishnavi2.jpg");
    background-size: cover;
    background-position: center;
    border-radius: 50%;
}

.pipe {
    position: absolute;
    width: 70px;
    background: #3cb371;
}

#score {
    position: absolute;
    top: 20px;
    width: 100%;
    text-align: center;
    font-size: 36px;
    font-weight: bold;
    color: #fff;
    text-shadow: 2px 2px 0 #000;
    z-index: 10;
}

#title {
    position: absolute;
    top: 70px;
    width: 100%;
    text-align: center;
    font-size: 22px;
    color: #ff4d6d;
    font-weight: bold;
}

#hint {
    position: absolute;
    bottom: 40px;
    width: 100%;
    text-align: center;
    color: #333;
}
</style>
</head>

<body>
<div id="game">
    <div id="score">0</div>
    <div id="title">Flappy Bird for Nishanvi ðŸ’–</div>
    <div id="bird"></div>
    <div id="hint">Tap / Click / Space to Fly</div>
</div>

<script>
const bird = document.getElementById("bird");
const game = document.getElementById("game");
const scoreEl = document.getElementById("score");

let birdY = window.innerHeight * 0.4;
let velocity = 0;
const gravity = 0.7;
const jumpPower = -11;

let pipes = [];
let score = 0;
let gameOver = false;

bird.style.top = birdY + "px";

function jump() {
    if (gameOver) location.reload();
    velocity = jumpPower;
}

document.addEventListener("click", jump);
document.addEventListener("keydown", e => {
    if (e.code === "Space") jump();
});

function createPipe() {
    const gap = 180;
    const minHeight = 60;
    const maxHeight = window.innerHeight - gap - minHeight;
    const topHeight = Math.random() * maxHeight + minHeight;

    const topPipe = document.createElement("div");
    topPipe.className = "pipe";
    topPipe.style.height = topHeight + "px";
    topPipe.style.top = "0px";
    topPipe.style.left = "100vw";

    const bottomPipe = document.createElement("div");
    bottomPipe.className = "pipe";
    bottomPipe.style.height =
        window.innerHeight - topHeight - gap + "px";
    bottomPipe.style.bottom = "0px";
    bottomPipe.style.left = "100vw";

    game.appendChild(topPipe);
    game.appendChild(bottomPipe);

    pipes.push({ topPipe, bottomPipe, passed: false });
}

setInterval(createPipe, 2000);

function gameLoop() {
    if (gameOver) return;

    velocity += gravity;
    birdY += velocity;
    bird.style.top = birdY + "px";

    if (birdY < 0 || birdY > window.innerHeight - 55) {
        endGame();
    }

    pipes.forEach(pipe => {
        const left =
            pipe.topPipe.getBoundingClientRect().left - 3;

        pipe.topPipe.style.left = left + "px";
        pipe.bottomPipe.style.left = left + "px";

        const birdRect = bird.getBoundingClientRect();
        const topRect = pipe.topPipe.getBoundingClientRect();
        const bottomRect = pipe.bottomPipe.getBoundingClientRect();

        if (
            birdRect.right > topRect.left &&
            birdRect.left < topRect.right &&
            (birdRect.top < topRect.bottom ||
             birdRect.bottom > bottomRect.top)
        ) {
            endGame();
        }

        if (!pipe.passed && birdRect.left > topRect.right) {
            pipe.passed = true;
            score++;
            scoreEl.innerText = score;
        }
    });

    requestAnimationFrame(gameLoop);
}

function endGame() {
    gameOver = true;
    scoreEl.innerText = "Score: " + score + " ðŸ’”";
}

gameLoop();
</script>
</body>
</html>
